jQuery.fn.youtubePlayer=function(e,t){t=typeof t!=="undefined"?t:{};if(!$(this).attr("id"))$(this).attr("id",$(this).data("youtube-id"));var n=$(this).attr("id");var r=t.width||$(this).data("width")||"620";var i=t.height||$(this).data("height")||"349";var s=t.category||$(this).data("category")||"youtube";var o=t.action||$(this).data("action")||"youtube";var u=t.playerVars||$(this).data("player-vars")||{rel:0};createPlayer=function(){new YT.Player(n,{height:i,width:r,videoId:e,playerVars:u,events:{onStateChange:onPlayerStateChange}})};var a=false;var f=false;playerChanged=function(e){if(e.data==YT.PlayerState.PLAYING&&!a){if(typeof _gaq!="undefined"){_gaq.push(["_trackEvent",s,o,"viewed",1,true])}$("#"+n).trigger("started");a=true}if(e.data==YT.PlayerState.ENDED&&!f){if(typeof _gaq!="undefined"){_gaq.push(["_trackEvent",s,o,"ended",1,true])}$("#"+n).trigger("ended");f=true}};var l=document.createElement("script");l.src="//www.youtube.com/iframe_api";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(l,c);window.onYouTubeIframeAPIReady=function(){createPlayer()};window.onPlayerStateChange=function(e){playerChanged(e)};$(this)};$(function(){$.each($(".ga-youtube"),function(e,t){if($(this).data("youtube-id")){$(this).youtubePlayer($(this).data("youtube-id"))}})})
